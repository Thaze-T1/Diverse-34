<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>34 DIVERSE // OMNI_FEED</title>
    <style>
        body { background-color: #050a14; color: #60a5fa; font-family: monospace; margin: 0; padding: 20px; }
        .header { border-bottom: 2px solid #1e3a8a; padding: 20px; text-align: center; }
        #query { background: #000; border: 1px solid #1e3a8a; color: #22c55e; padding: 10px; width: 250px; outline: none; }
        .btn { background: #1e3a8a; color: #fff; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        
        /* GRID FOR UNLIMITED INTEL */
        #feed { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { border: 1px solid #1e3a8a; background: #000; padding: 10px; display: flex; flex-direction: column; }
        .card iframe { width: 100%; aspect-ratio: 16/9; border: none; background: #050a14; }
        .card-title { color: #22c55e; margin: 10px 0; font-size: 14px; font-weight: bold; height: 40px; overflow: hidden; }
        .source-link { color: #60a5fa; font-size: 11px; text-decoration: none; border: 1px solid #1e3a8a; padding: 5px; text-align: center; }

        .load-zone { text-align: center; padding: 40px; }
        #load-btn { background: #22c55e; color: #000; border: none; padding: 15px 40px; cursor: pointer; font-weight: bold; display: none; }
    </style>
</head>
<body>

    <div class="header">
        <h1>34 DIVERSE</h1>
        <p>> [SECTOR]: OMNI_STREAM | [SIGNAL]: <span id="sig-status" style="color:#22c55e">READY</span></p>
        <input type="text" id="query" placeholder="SEARCH ALL MEDIA...">
        <button class="btn" onclick="newSearch()">INFILTRATE</button>
    </div>

    <div id="feed"></div>

    <div class="load-zone">
        <button id="load-btn" onclick="executeSearch()">LOAD NEXT WAVE</button>
    </div>

    <script>
        let page = 1;
        let lastQuery = "";

        function newSearch() {
            const q = document.getElementById('query').value;
            if(!q) return;
            lastQuery = q;
            page = 1;
            document.getElementById('feed').innerHTML = "";
            executeSearch();
        }

        async function executeSearch() {
            const status = document.getElementById('sig-status');
            const btn = document.getElementById('load-btn');
            status.innerText = "EXTRACTING_PAGE_" + page;
            btn.style.display = "none";

            // Using a high-speed Invidious node for direct data extraction
            const url = `https://vid.priv.au/api/v1/search?q=${encodeURIComponent(lastQuery)}&page=${page}`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if(data.length === 0) {
                    status.innerText = "END_OF_DATABASE";
                    return;
                }

                data.forEach(item => {
                    if(item.type !== 'video') return;
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <iframe src="https://www.youtube.com/embed/${item.videoId}" loading="lazy" allowfullscreen></iframe>
                        <div class="card-title">${item.title}</div>
                        <a href="https://youtube.com/watch?v=${item.videoId}" target="_blank" class="source-link">> VIEW SOURCE</a>
                    `;
                    document.getElementById('feed').appendChild(card);
                });

                page++;
                status.innerText = "SIGNAL_STABLE";
                btn.style.display = "inline-block";
                btn.innerText = "LOAD WAVE " + page;

            } catch (err) {
                status.innerText = "SIGNAL_JAMMED_RETRYING";
                status.style.color = "#ef4444";
            }
        }
    </script>
</body>
</html>
